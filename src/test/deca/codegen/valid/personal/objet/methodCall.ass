	TSTO #1024
	BOV pile_pleine
	ADDSP #3
; start main program
	LOAD #null, R0
	STORE R0, 1(GB)
	LOAD code.Object.equals, R0
	STORE R0, 2(GB)
; Code de la table des méthode de : A
	LEA 1(GB), R0
	STORE R0, 3(GB)
	LOAD code.Object.equals, R0
	STORE R0, 4(GB)
	LOAD code.A.move, R0
	STORE R0, 5(GB)
; --------------------------------------------------
; 		Code du programme principal
; --------------------------------------------------
; ---------- Déclaration des variables
	NEW #1, R0
	BOV tas_plein
	LEA 3(GB), R1
	STORE R1, 0(R0)
	LOAD R0, R2
	PUSH R2
	BSR init.A
	POP R2
	STORE R2, 6(GB)
; ---------- Instructions
	ADDSP #4
	LOAD 6(GB), R0
	STORE R0, 0(SP)
	LOAD #1, R2
	STORE R2, -1(SP)
	LOAD #2, R3
	STORE R3, -2(SP)
	LOAD #3, R4
	STORE R4, -3(SP)
	LOAD 0(SP), R0
	CMP #null, R0
	BEQ dereferencement.null
	LOAD 0(R0), R0
	BSR 1(R0)
	SUBSP #4
	HALT
code.Object.equals:
	TSTO #2
	BOV pile_pleine
	PUSH R2
	LOAD -3(LB), R2
	CMP -2(LB), R2
	SEQ R0
	POP R2
	RTS
; --------------------------------------------------
; 		Classe A
; --------------------------------------------------
; ---------- Initialisation des champs de A
init.A:
; ---------- Code de la methode move
code.A.move:
	PUSH R2
	PUSH R3
	PUSH R4
	POP R2
	POP R3
	POP R4
	WSTR "Erreur : sortie de la methode A.move sans return"
	WNL
	ERROR
fin.A.move:
	RTS
; --------------------------------------------------
; 		Message d'erreur : pile pleine
; --------------------------------------------------
pile_pleine:
	WSTR "Erreur : dépassement de la taille de pile autorisée"
	WNL
	ERROR
; --------------------------------------------------
; 		Message d'erreur : tas plein
; --------------------------------------------------
tas_plein:
	WSTR "Erreur : allocation impossible, tas plein"
	WNL
	ERROR
; --------------------------------------------------
; 		Message d'erreur : déréférencement nul
; --------------------------------------------------
dereferencement.null:
	WSTR "Erreur : Déréférencement impossible"
	WNL
	ERROR
; end main program
